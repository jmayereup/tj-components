<div class="container">
  <!-- Selection Screen -->
  <div id="selection-screen" style="display: none;">
    <h2 id="topic-title"></h2>
    <p class="scenario" id="scenario-desc"></p>

    <div class="mode-selection">
      <p><strong>Step 1: Choose Game Mode</strong></p>
      <div class="mode-buttons">
        <button class="mode-btn" id="mode-multi">Collaborative (Multi-device)</button>
        <button class="mode-btn" id="mode-single">Single Player (TTS Partners)</button>
      </div>
    </div>

    <div class="player-selection">
      <p><strong>Step 2: Select your player number:</strong></p>
      <div class="role-grid" id="button-container"></div>
    </div>
  </div>

  <!-- Game Screen -->
  <div id="game-screen" style="display: none;">
    <div class="header-row">
      <div class="header-info">
        <h2 id="game-topic"></h2>
        <div class="mode-badge" id="mode-badge"></div>
      </div>
      <div class="header-controls">
        <button id="voice-btn" class="icon-btn" title="Choose Voice" style="display: none;">
          <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
            <path d="M9 13c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0-6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm0 8c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4zm-6 4c.22-.72 3.31-2 6-2 2.7 0 5.77 1.29 6 2H3zM15.08 7.05c.84 1.18.84 2.71 0 3.89l1.68 1.69c2.02-2.02 2.02-5.17 0-7.27l-1.68 1.69zM18.42 3.7l-1.7 1.71c2.3 2 2.3 5.6 0 7.6l1.7 1.71c3.28-3.23 3.28-8.15 0-11.02z" />
          </svg>
        </button>
        <div class="progress-info" id="progress-info">0 / 0 Answered</div>
      </div>
    </div>

    <div id="layout-container">
      <div class="info-column">
        <div class="section-title">Your partner will ask you questions about this passage.</div>
        <div id="my-texts"></div>
      </div>

      <div id="partner-column" class="partner-column" style="display: none;">
        <div class="section-title">Partner's Questions (For you)</div>
        <div class="instruction-banner">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
            <path d="M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" />
          </svg>
          Listen and record your answer.
        </div>
        <div id="partner-questions"></div>
      </div>
    </div>

    <div class="section-title">Your partner has the answer to these questions.</div>
    <div id="my-questions"></div>

    <div id="footer-actions" class="footer-actions">
      <button id="complete-btn" class="complete-btn">Complete & Show Score</button>
    </div>
  </div>

  <!-- Score Screen -->
  <div id="score-screen" style="display: none;" class="score-screen">
    <div class="score-circle">
      <div class="score-value" id="final-score"></div>
      <div class="score-percent" id="final-percent"></div>
    </div>
    <h2 id="score-msg"></h2>
    <p id="score-details"></p>
    <div class="score-actions">
      <button class="role-btn" id="restart-btn">Try Again / Switch Player</button>
      <button class="report-btn" id="report-btn" style="display: none;">ðŸ“„ See Report Card</button>
    </div>
    <div id="combined-score-area"></div>
  </div>
</div>

<!-- Voice Overlay -->
<div class="voice-overlay" id="voice-overlay" style="display: none;">
  <div class="voice-card">
    <div class="voice-card-header">
      <h3>Choose Voice</h3>
      <button class="close-voice-btn" id="close-voice-btn">Ã—</button>
    </div>
    <div class="voice-list" id="voice-list"></div>
  </div>
</div>

<!-- Report Overlay -->
<div class="report-overlay" id="report-overlay" style="display: none;">
  <div class="report-modal">
    <div class="initial-form" id="initial-form">
      <div class="report-icon">ðŸ“„</div>
      <h2>Report Card</h2>
      <p>Enter your details to generate your report.</p>
      <input type="text" id="nickname-input" placeholder="Your Nickname" autocomplete="off">
      <input type="text" id="number-input" placeholder="Student Number" autocomplete="off" inputmode="numeric">
      <button class="generate-btn" id="generate-btn">Generate Report Card</button>
      <button class="cancel-btn" id="cancel-btn">Cancel</button>
    </div>
    <div class="report-area" id="report-area" style="display: none;"></div>
  </div>
</div>
